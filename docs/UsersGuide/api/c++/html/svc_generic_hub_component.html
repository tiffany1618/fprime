<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::GenericHub Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">Latest</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_svc_generic_hub_component.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_svc.html#a2726e21edb6ef5238cd546d94c01c0fa">Svc::GenericHub</a> Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md500"></a>
Svc::GenericHub Generic Hub Component</h1>
<p>The Generic Hub component is an implementation of the F´ <a href="https://nasa.github.io/fprime/UsersGuide/best/hub-pattern.html">hub pattern</a>. This pattern (and component) is used to bridge across an address space barrier between F´ deployments and route F´ port calls to the remote deployment. It also receives incoming port calls from the remote component. Essentially, it is a port multiplexer/demultiplexer that serializes the port calls to an <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> object and outputs this data to an implementation of the <code>Drv::ByteStreamDriverModel</code> for transport out of the current deployment's address space.</p>
<p><b>Note:</b> At this time, the hub drops send/receive errors. Individual projects that need to monitor send/receive errors may need to add this functionality to the GenericHub <a href="#idiosyncrasies">see idiosyncrasies</a></p>
<h2><a class="anchor" id="autotoc_md501"></a>
Design</h2>
<p>The generic hub accepts incoming port calls using an array of Serial input ports. This allows any port call to be bridged across the connection. There is also an incoming set of ports supporting <code><a class="el" href="class_fw_1_1_buffer.html">Fw::Buffer</a></code> type allowing the generic hub to send generic byte data across (e.g. file packets) the connection. These connections are serialized into the outgoing connections to the driver. On the far side of the byte driver, another generic hub deserializes these port calls and buffer calls into normal F´ port calls on the new deployment as if they were made locally.</p>
<p>Generic hub inputs on one hub should be parallel to the outputs on the other hub and vise-versa. It is also essential that users never pass a <b>pointer</b> into the generic hub, as pointer data will become invalid when it leaves the current address space. A sample configuration is shown below. Finally, the generic hub is bidirectional, so it can operate on inputs and produce outputs as long as its remote counterpart is hooked up in parallel.</p>
<h3><a class="anchor" id="autotoc_md502"></a>
Example Formations</h3>
<p>This section shows how to set up the generic hub component. It is broken into several separate views. This first shows the top level of the formation. Here we connect a component on the left (command dispatcher) to several components on the right (two signal generators). Both forward and reverse connections are shown. Notice the parallelism from the left port calls from the command dispatcher to the port outputs to the components being commanded.</p>
<p><img src="./img/gh-top.png" alt="Top Level Generic Hub" class="inline"/></p>
<p>The next diagram show a similar setup to the first, except here we are using buffer transmission to support a file downlink and uplink pair to show how the left deployment may "downlink" files to the right deployment. Both this and the first diagram can be connected at the same time, and are split only to keep the diagrams less complex. Here the reverse connections are omitted for simplicity.</p>
<p><img src="./img/gh-top-buff.png" alt="Top Level Generic Hub" class="inline"/></p>
<p>The following diagram dives into the specific connections on the left side. Here incoming connection reach the hub and the hub is connected to a driver. This driver carries the port calls to the other address space.</p>
<p><img src="./img/gh-left.png" alt="Top Level Generic Hub" class="inline"/></p>
<p>Finally, the following diagram shows the right side where the connections come out of the right side's driver and goes into the hub which expands the port to the various right-side components.</p>
<p><img src="./img/gh-right.png" alt="Top Level Generic Hub" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md503"></a>
Configuration</h2>
<p>Generic hub maximum output and input ports are configured using <code>AcConstants.ini</code> as shown below. Since hubs work in tandem with another hub, the input ports on the first must match the output ports on the second. Both the number of port and buffer inputs/outputs may be configured.</p>
<div class="fragment"><div class="line">; Hub connections. Connections on all deployments should mirror these settings.</div>
<div class="line">GenericHubInputPorts = 10</div>
<div class="line">GenericHubOutputPorts = 10</div>
<div class="line">GenericHubInputBuffers = 10</div>
<div class="line">GenericHubOutputBuffers = 10</div>
</div><!-- fragment --><p>The above configuration may be used with both deployments hubs as the input/output pairs match.</p>
<h2><a class="anchor" id="autotoc_md504"></a>
Idiosyncrasies</h2>
<p>Currently, the <code>Drv::ByteStreamDriverModel</code> can report errors and failures. This generic hub component drops these errors. Users who expect the driver to error should adapt this component to handle this issue. Future versions of this component may correct this issue by calling to a fault port on error.</p>
<h2><a class="anchor" id="autotoc_md505"></a>
Requirements</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name </th><th class="markdownTableHeadNone">Description </th><th class="markdownTableHeadNone">Validation  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GENHUB-001 </td><td class="markdownTableBodyNone">The generic hub shall receive incoming port and buffer calls </td><td class="markdownTableBodyNone">unit test  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GENHUB-002 </td><td class="markdownTableBodyNone">The generic hub shall serialize the incoming port and buffer calls to an output port </td><td class="markdownTableBodyNone">unit test  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GENHUB-003 </td><td class="markdownTableBodyNone">The generic hub shall deserialize the incoming serialize calls to output port and buffer calls </td><td class="markdownTableBodyNone">unit test  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GENHUB-004 </td><td class="markdownTableBodyNone">The generic hub shall work with another generic hub to send port and buffer calls </td><td class="markdownTableBodyNone">unit test  </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md506"></a>
Change Log</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2020-12-21 </td><td class="markdownTableBodyNone">Initial Draft  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2021-01-29 </td><td class="markdownTableBodyNone">Updated  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="svc.html">Svc Components, Ports, and Classes</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
